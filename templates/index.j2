<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>{{ site_title }}</title>
    <link rel="stylesheet" href="css/style.css"><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
</head>
<body>
    <div id="top" class="">
    </div>

<div class = "container-fluid">


    <div id="row-top" class="row my-2 d-none d-md-block">
        <div class='d-flex justify-content-end'>
        {%  if path_exists('site/static/events.ics') %}
                <a href="static/events.ics" class="btn me-2 btn-outline-primary btn-sm">.ics</a>
        {% endif %}
        {%  if path_exists('site/static/events.json') %}
                <a href="static/events.json" class="btn me-2 btn-outline-primary btn-sm">.json</a>
        {% endif %}
        </div>
    </div>

        {% for year in schedule.keys() %}

            <div class = "row" id="year-{{ year }}">


            <p class="h5">{{ year }}</p>

            {%  for kw in schedule[year].keys() %}

                <div class="row" id="kw-{{ kw }}">

                    <div class="col-12 col-xl-1 h5 pe-0">KW {{ kw }}</div>

                    <div class="col-12 col-xl-11">


                        {% for day in schedule[year][kw].keys() %}

                            <div class="row" id="date-{{  day }}">

                                <div class="col-12 col-lg-2" >
                                    <p class="h5 text-nowrap">{% if day==today %}Today{% else %}{{ date_weekdays[day] }}{% endif %}, {{ day }}</p>
                                </div>

                                <div class="ps-0 ps-lg-4 col-12 col-lg-10" id="events-{day}">

                                    <div class="row mb-5">


                                                <table class="ms-3 mb-3 table-events table-fixed  table border rounded table-striped">
                                                    <thead>
                                                    <tr class="row-title text-reset">
                                                        <th style="width:25%">Title</th>
                                                        <th style="width:10%">Begin</th>
                                                        <th style="width:10%">End</th>
                                                        <th style="width:20%">Location</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>

                                                    {% for event in schedule[year][kw][day] %}

                                                        <tr class="row-event" id = "{{ event.uid }}">
                                                            <td class="">{% if event.url != None %}<a class="text-decoration-none fw-bold" target="_blank" href="{{ event.url }}">{{ event.title }}</a>{% else %}<span class="fw-bold">{{ event.title }}</span>{% endif %}
                                                            <div class = "row-event-info fst-italic">
                                                            {% if event.description %}
                                                                {{ event.description }}
                                                            {% endif %}
                                                            </div>
                                                            </td>
                                                            <td>{%  if event.start_datetime != None %}{{ event.start_datetime.strftime('%H:%M') }} {% endif %}</td>
                                                            <td>{%  if event.end_datetime != None %}{{ event.end_datetime.strftime('%H:%M') }} {% endif %}{%  if event.multi_day and event.weekday_end != None %}({{ event.weekday_end[:3] }}){% endif %}</td>
                                                            <td class="text text-break"><span>{% if event.location != None %}{{ event.location }}{% endif %}</span></td>


                                                        </tr>

                                                    {% endfor %}

                                                    </tbody>
                                                </table>

                                    </div>

                                </div>

                            </div>



                        {% endfor %}

                    </div>

                </div>
            {% endfor %}
            </div>
        {% endfor %}


</div>



</body>
</html>